{% extends "base.html" %}
{% block title %}{{ t('–ê–¥–º—ñ–Ω–ø–∞–Ω–µ–ª—å - –ö–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ') }}{% endblock title %}
{% block content %}
<div class="container">
    <h1 class="my-4">üë• {{ t('–£–ø—Ä–∞–≤–ª—ñ–Ω–Ω—è –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞–º–∏') }}</h1>

    <div class="table-responsive">
        <table class="table table-striped">
            <thead>
                <tr>
                    <th>{{ t('ID') }}</th>
                    <th>{{ t("–Ü–º'—è –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞") }}</th>
                    <th>{{ t('Email') }}</th>
                    <th>{{ t('–°—Ç–∞—Ç—É—Å') }}</th>
                    <th>{{ t('–î—ñ—ó') }}</th>
                </tr>
            </thead>
            <tbody>
                {% for user in users %}
                <tr>
                    <td>{{ user.id }}</td>
                    <td>{{ user.username }}</td>
                    <td>{{ user.email }}</td>
                    <td>
                        <span class="badge {% if user.is_admin %}bg-success{% else %}bg-secondary{% endif %}">
                            {{ t("–ê–¥–º—ñ–Ω—ñ—Å—Ç—Ä–∞—Ç–æ—Ä") if user.is_admin else t("–ö–æ—Ä–∏—Å—Ç—É–≤–∞—á") }}
                        </span>
                    </td>
                    <td>
                        {% if user.is_admin %}
                            {% if user.username != current_user.username %}
                            <form method="POST" action="{{ url_for('admin.toggle_admin_status', user_id=user.id) }}" class="d-inline">
                                <input type="hidden" name="csrf_token" value="{{ csrf_token() }}">
                                <input type="hidden" name="is_admin" value="false">
                                <button type="submit" class="btn btn-sm btn-warning" onclick="return confirm('{{ t('–ó–∞–±—Ä–∞—Ç–∏ –ø—Ä–∞–≤–∞ –∞–¥–º—ñ–Ω—ñ—Å—Ç—Ä–∞—Ç–æ—Ä–∞ —É –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞') }} {{ user.username }}?')">
                                    {{ t('–ó–∞–±—Ä–∞—Ç–∏ –∞–¥–º—ñ–Ω –ø—Ä–∞–≤–∞') }}
                                </button>
                            </form>
                            {% else %}
                            <span class="text-muted">{{ t('–ü–æ—Ç–æ—á–Ω–∏–π –∞–¥–º—ñ–Ω') }}</span>
                            {% endif %}
                        {% else %}
                        <form method="POST" action="{{ url_for('admin.toggle_admin_status', user_id=user.id) }}" class="d-inline">
                            <input type="hidden" name="csrf_token" value="{{ csrf_token() }}">
                            <input type="hidden" name="is_admin" value="true">
                            <button type="submit" class="btn btn-sm btn-success" onclick="return confirm('{{ t('–ù–∞–¥–∞—Ç–∏ –ø—Ä–∞–≤–∞ –∞–¥–º—ñ–Ω—ñ—Å—Ç—Ä–∞—Ç–æ—Ä–∞ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á—É') }} {{ user.username }}?')">
                                {{ t('–ó—Ä–æ–±–∏—Ç–∏ –∞–¥–º—ñ–Ω–æ–º') }}
                            </button>
                        </form>
                        {% endif %}
                        {% if user.username != current_user.username %}
                        <form method="POST" action="{{ url_for('admin.delete_user', user_id=user.id) }}" class="d-inline">
                            <input type="hidden" name="csrf_token" value="{{ csrf_token() }}">
                            <button type="submit" class="btn btn-sm btn-danger" onclick="return confirm('{{ t('–í–∏–¥–∞–ª–∏—Ç–∏ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞') }} {{ user.username }}? {{ t('–¶—è –¥—ñ—è –Ω–µ–∑–≤–æ—Ä–æ—Ç–Ω—è!') }}')">
                                üóëÔ∏è {{ t('–í–∏–¥–∞–ª–∏—Ç–∏') }}
                            </button>
                        </form>
                        {% endif %}
                    </td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
    </div>
</div>
{% endblock content %}

